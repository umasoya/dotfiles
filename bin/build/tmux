#!/usr/local/bin/zsh
# vim: ft=sh

set -eux

local repo=$HOME/tmux-2.6
cd ${HOME}

if (( $+is_mac )); then
  pm="brew"
elif (( $+is_linux )); then
  case ${DIST} in
    CentOS)
      pm="yum"
      depends="ncurses-devel libevent-devel"
      ;;
    Ubuntu)
      pm="apt-get"
      depends="libevent-dev libncurses5-dev"
      ;;
  esac
elif
  exit
fi

`sudo ${pm} install -y ${depends}`

if [[ ! -e ${repo} ]]; then
  curl -Lo tmux.tar.gz https://github.com/tmux/tmux/releases/download/2.6/tmux-2.6.tar.gz
  tar zxf tmux.tar.gz
fi
cd ${HOME}/tmux-2.6
./configure && make
sudo make install
cd ${HOME}
rm -rf tmux*
